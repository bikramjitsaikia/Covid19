<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>All Users - Covid 19 India</title>
	<link rel="stylesheet" type="text/css"
		href="/webjars/bootstrap/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css"
		href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">
	<link rel="stylesheet" type="text/css"
		href="https://cdn.datatables.net/select/1.3.3/css/select.dataTables.min.css">
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/modules/data.js"></script>
	<script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://code.highcharts.com/modules/accessibility.js"></script>

	<script type="text/javascript">
	Highcharts.getJSON(
	    'https://api.covid19india.org/data.json',
	    function (data) {
            
	        Highcharts.chart('container', {
	            chart: {
	                zoomType: 'x'
	            },
	            title: {
	                text: 'Daily active cases'
	            },
	            xAxis: {
	                type: 'datetime'
	            },
	            yAxis: {
	                title: {
	                    text: ''
	                }
	            },
	            legend: {
	                enabled: true
	            },
	            plotOptions: {
	                area: {
	                    fillColor: {
	                        linearGradient: {
	                            x1: 0,
	                            y1: 0,
	                            x2: 0,
	                            y2: 1
	                        },
	                        stops: [
	                            [0, Highcharts.getOptions().colors[0]],
	                            [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
	                        ]
	                    },
	                    marker: {
	                        radius: 2
	                    },
	                    lineWidth: 1,
	                    states: {
	                        hover: {
	                            lineWidth: 1
	                        }
	                    },
	                    threshold: null
	                }
	            },
	
	            series: [{
	                type: 'area',
	                name: 'Total new cases',
	                data:    activeData(data, "dailyconfirmed"), 
	            }]
	        });
	        
	       	Highcharts.chart('time-series', {
	            chart: {
	                zoomType: 'x'
	            },
	            title: {
	                text: 'Daily recovered cases'
	            },
	            subtitle: {
	                text: document.ontouchstart === undefined ?
	                    'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'
	            },
	            xAxis: {
	                type: 'datetime'
	            },
	            yAxis: {
	                title: {
	                    text: ''
	                }
	            },
	            legend: {
	                enabled: false
	            },
	            plotOptions: {
	                area: {
	                    fillColor: {
	                        linearGradient: {
	                            x1: 0,
	                            y1: 0,
	                            x2: 0,
	                            y2: 1
	                        },
	                        stops: [
	                            [0, Highcharts.getOptions().colors[0]],
	                            [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
	                        ]
	                    },
	                    marker: {
	                        radius: 2
	                    },
	                    lineWidth: 1,
	                    states: {
	                        hover: {
	                            lineWidth: 1
	                        }
	                    },
	                    threshold: null
	                }
	            },
	
	            series: [{
	                type: 'area',
	                name: 'Total new cases',
	                data:    activeData(data, "dailyrecovered"), 
	            }]
	        });
	        
	       	Highcharts.chart('time-series-1', {
	            chart: {
	                zoomType: 'x'
	            },
	            title: {
	                text: 'Daily death cases'
	            },
	            subtitle: {
	                text: document.ontouchstart === undefined ?
	                    'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'
	            },
	            xAxis: {
	                type: 'datetime'
	            },
	            yAxis: {
	                title: {
	                    text: ''
	                }
	            },
	            legend: {
	                enabled: false
	            },
	            plotOptions: {
	                area: {
	                    fillColor: {
	                        linearGradient: {
	                            x1: 0,
	                            y1: 0,
	                            x2: 0,
	                            y2: 1
	                        },
	                        stops: [
	                            [0, Highcharts.getOptions().colors[0]],
	                            [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
	                        ]
	                    },
	                    marker: {
	                        radius: 2
	                    },
	                    lineWidth: 1,
	                    states: {
	                        hover: {
	                            lineWidth: 1
	                        }
	                    },
	                    threshold: null
	                }
	            },
	
	            series: [{
	                type: 'area',
	                name: 'Total new cases',
	                data:    activeData(data, "dailydeceased"), 
	            }]
	        });

	       	Highcharts.chart('time-series-2', {
	            chart: {
	                zoomType: 'x'
	            },
	            title: {
	                text: 'Total active cases'
	            },
	            subtitle: {
	                text: document.ontouchstart === undefined ?
	                    'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'
	            },
	            xAxis: {
	                type: 'datetime'
	            },
	            yAxis: {
	                title: {
	                    text: ''
	                }
	            },
	            legend: {
	                enabled: false
	            },
	            plotOptions: {
	                area: {
	                    fillColor: {
	                        linearGradient: {
	                            x1: 0,
	                            y1: 0,
	                            x2: 0,
	                            y2: 1
	                        },
	                        stops: [
	                            [0, Highcharts.getOptions().colors[0]],
	                            [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
	                        ]
	                    },
	                    marker: {
	                        radius: 2
	                    },
	                    lineWidth: 1,
	                    states: {
	                        hover: {
	                            lineWidth: 1
	                        }
	                    },
	                    threshold: null
	                }
	            },
	
	            series: [{
	                type: 'area',
	                name: 'Total new cases',
	                data:    activeData(data, "totalconfirmed"), 
	            }]
	        });
	    }
	);
	function activeData(data, index) {
		var dataForDays = 90;
		var activeCases = [];
		var i = 0;
		dataLength = data.cases_time_series.length;
	    for (i=dataLength-dataForDays; i < dataLength; i += 1) {
	    	activeCases.push([
	    		parseFloat(Date.parse(data.cases_time_series[i].date)),
	    		parseFloat(data.cases_time_series[i][String(index)]),
	    	]);
		}			
		return activeCases;
	}
    </script>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col" id="time-series">
			</div>
			<div class="col" id="container">
			</div>
		</div>
		<div class="row">
			<div class="col" id="time-series-1">
			</div>
			<div class="col" id="time-series-2">
			</div>
		</div>
	</div>
</body>
</html>